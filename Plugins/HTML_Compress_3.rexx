/** $VER: Version 0.09 (07 Nov 1999), by Thorsten Willert
*/
;SIGNAL ON ERROR;SIGNAL ON SYNTAX;PARSE ARG In,Out .;IF In="INFO" THEN;DO;RETURN 0","0;END;ELSE;DO;CALL OPEN(InDatei,In,"R");CALL OPEN(OutDatei,Out,"W");Output=1;DO WHILE ~EOF(InDatei);Zeile=READLN(InDatei);IF INDEX(Zeile,'<!--') ~==0 THEN Zeile= DelKom(Zeile);IF STRIP(Zeile)=='' THEN ITERATE;ZeileU=UPPER(Zeile);IF INDEX(ZeileU,'<PRE>') ~=0 THEN Output=0;IF INDEX(ZeileU,'<SCRIPT') ~=0 THEN ScrOutput=1;IF INDEX(ZeileU,'</SCRIPT>') ~=0 THEN ScrOutput=0;IF ScrOutput=1 THEN;DO;CALL WRITELN(OutDatei,STRIP(Zeile));ITERATE;END;IF Output=1 THEN;DO;Zeile=STRIP(SPACE(TRANSLATE(Zeile,' ','09'X'0D'X),1));CALL WRITELN(OutDatei,REPLACE(Zeile,'> <','><'));END;ELSE CALL WRITELN(OutDatei,TRIM(Zeile));IF INDEX(ZeileU,'</PRE>') ~=0 THEN Output=1;END;CALL CLOSE(InDatei);CALL CLOSE(OutDatei);RETURN 1;END;RETURN 0;REPLACE:PROCEDURE;PARSE ARG src,old,new;str='';DO WHILE ''~=src;loc=POS(old,src);PARSE VAR src sub (old) src;str=str||sub;IF loc~=0 THEN str=str||new;END;RETURN str;DelKom:PROCEDURE;PARSE ARG Zeile;DO WHILE Kommentar ~=='';PARSE VAR Zeile Teil1 '<!--'Kommentar'-->' Teil2;IF Kommentar ~=='' THEN Zeile=Teil1||Teil2;END;RETURN Zeile;ERROR:;SYNTAX:;RETURN RC","SIGL